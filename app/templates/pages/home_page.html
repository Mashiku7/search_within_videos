{% extends "common/page_base.html" %} {# common/page_base.html extends layout.html #}

{% block content %}

<div id='header_container'>
  <h1 id='main_title'>In<span id="tube">Tube</span></h1>
  <h4>Search within YouTube videos</h4>
  <input type="text" class="" id="search-box" />
</div>
<div id="hits-container"></div>
<div id="pagination-container"></div>

{% raw %}

<!-- not real lmao this is it -->
<div>
  <img class="preview" src="https://i.ytimg.com/vi/ZaUB84dMQ9U/hqdefault.jpg?custom=true&w=336&h=188&stc=true&jpg444=true&jpgq=90&sp=68&sigh=uK1rbMa1Wwwo63_uAf5EcFpzSKU" />
  <div class="hover_holders">
    <a href='timestamped video url'>
      <div class="hover" value="store the frame img url here and modify the img tag above onhover (and on mouse leave you go back to thumbnail)" style="margin-left: 20%; /* this percentage is the same as how much percent in the video the timestamp is */"></div>
    </a>
    <a href='timestamped video url'>
      <div class="hover" value="store the frame img url here and modify the img tag above onhover (and on mouse leave you go back to thumbnail)" style="margin-left: 40%; /* this percentage is the same as how much percent in the video the timestamp is */"></div>
    </a>
  </div>
  <div class="vid_desc">
    <div>Title</div>
    <div>username</div>
    <div>desc</div>
  </div>
</div>


<!--<script type="text/html" id="hit-template">
	<div class="hit">
		<div class="hit-img">
			<a href="{{url}}&t={{#helpers.divide}}{{time}}{{/helpers.divide}}s"><img src="{{image_url}}"/></a>
		</div>
		<div class="hit-text">
			<h3><a href="{{url}}&t={{#helpers.divide}}{{time}}{{/helpers.divide}}s">{{title}}</a></h3>
			<p>{{username}}</p>
			<p>Term occurs at {{#helpers.format}}{{time}}{{/helpers.format}}</p>
		</div>
	</div>
</script>-->

<script>
var client = algoliasearch('Y9MCTNJ20T', '5c85dabf76ed1ba90c86b74f3470d965');
var helper = algoliasearchHelper(client, 'frames');

var search = instantsearch({
	appId: 'Y9MCTNJ20T',
	apiKey: '5c85dabf76ed1ba90c86b74f3470d965',
	indexName: 'frames',
	searchFunction: function(helper) {
    var searchResults = $('.search-results');
    if (helper.state.query === '') {
		  searchResults.hide();
		  return;
		}
		helper.search();
		helper.on('result', function(data){
			console.log(data);
		});
		searchResults.show();
	}
});

search.templatesConfig.helpers.format = function() {
	var seconds = parseInt(this.time) / 1000;
	var minutes = Math.floor(seconds / 60);
	var rem = seconds % 60;
	return minutes + "m:" + rem + "s";
};

search.templatesConfig.helpers.divide = function() {
	return this.time / 1000;
};

search.addWidget(
	instantsearch.widgets.searchBox({
		container: '#search-box',
		placeholder: 'Search for videos...'
	})
);

search.addWidget(
	instantsearch.widgets.hits({
		container: '#hits-container',
		templates: {
			item: getTemplate("#hit-template")
		}
	})
);

search.addWidget(
	instantsearch.widgets.pagination({
		container: '#pagination-container'
	})
);

search.start();

function getTemplate(name) {
	return document.querySelector(name).innerHTML;
}

</script>

{% endraw %}

{% endblock %}
